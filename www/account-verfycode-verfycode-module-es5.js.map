{"version":3,"sources":["src/app/account/verfycode/verfycode.page.html","src/app/account/verfycode/verfycode.module.ts","src/app/account/verfycode/verfycode.page.scss","src/app/account/verfycode/verfycode.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-content>\\n<!--Verify OTP code-->\\n<div>\\n  <ion-card-header>\\n    <ion-row>\\n      <ion-col>\\n        <h1 class=\\\"welcome_text\\\">\\n          Verifique su<br />\\n          bandeja de SMS\\n        </h1>\\n      </ion-col>\\n    </ion-row>\\n    <p style=\\\"color: rgb(85, 85, 85);font-family: 'SF Pro Display';font-weight: 400;font-style: normal;font-size: 14px;\\\">\\n      Se ha enviado un codigo al Telefono <b>{{ phone }}</b> Verifica tu bandeja.\\n    </p>\\n  </ion-card-header>\\n  \\n  <ion-item>\\n    <ion-label position=\\\"floating\\\" style=\\\"font-family: 'SF Pro Display';font-weight: 400;font-style: normal;font-size: 12px\\\">Ingresa el codigo</ion-label>\\n    <ion-input type=\\\"number\\\" [(ngModel)]=\\\"Code\\\" required></ion-input>\\n  </ion-item>\\n  \\n  <p align=\\\"center\\\" style=\\\"font-family: 'SF Pro Display';font-weight: 400;font-style: normal\\\">No obtuviste el codigo? <a routerLink=\\\"/home\\\" routerDirection=\\\"forward\\\">Reenviar</a></p>\\n\\n</div>\\n</ion-content>\\n<ion-footer style=\\\"text-align: center;\\\">\\n  <ion-button expand=\\\"block\\\" (click)=\\\"verfyCode()\\\" style=\\\"font-family: 'SF Pro Display';font-weight: 500;font-size: 16px;\\\">{{txtbnt}}</ion-button>\\n</ion-footer>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\n\nimport { VerfycodePage } from './verfycode.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VerfycodePage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [VerfycodePage]\n})\nexport class VerfycodePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FjY291bnQvdmVyZnljb2RlL3ZlcmZ5Y29kZS5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras } from '@angular/router';\nimport { ServerService } from '../../service/server.service';\nimport { ToastController,NavController,LoadingController,Events } from '@ionic/angular';\nimport { Keyboard } from '@ionic-native/keyboard/ngx';\nimport { FirebaseAuthentication } from '@ionic-native/firebase-authentication/ngx';\n\n@Component({\n  selector: 'app-verfycode',\n  templateUrl: './verfycode.page.html',\n  styleUrls: ['./verfycode.page.scss'],\n})\nexport class VerfycodePage implements OnInit {\n\n  user_id:any = 'null';\n  Code: String;\n  phone: any = '';\n  stateVerify;\n  windowsRef:any;\n  confirmationResult: any;\n  txtbnt: any = 'Verificar';\n\n  constructor(\n    private route: ActivatedRoute,\n    public server : ServerService,\n    public toastController: ToastController,\n    public keyboard:Keyboard,\n    private nav: NavController,\n    public loadingController: LoadingController,\n    public events: Events,\n    public firebaseAuthentication: FirebaseAuthentication\n  ) { \n    if (!localStorage.getItem('confirmationResult')) {\n      this.nav.navigateForward('/home');\n    }\n  }\n\n  ngOnInit() {\n    this.confirmationResult = localStorage.getItem('confirmationResult');\n    this.phone = localStorage.getItem('phone');\n    if (localStorage.getItem('user_id') && localStorage.getItem('user_id') != null) {\n      this.user_id = localStorage.getItem('user_id');\n    }\n  }\n\n  async verfyCode()\n  {\n    const loading = await this.loadingController.create({\n      message: 'Validando...',\n    });\n    await loading.present();\n    if (this.Code && this.Code.toString().length >= 4 && this.Code.toString().length <= 8) {\n      let verificationCode: string = this.Code.toString();\n      \n      this.firebaseAuthentication.signInWithVerificationId(this.confirmationResult,verificationCode).then((data:any) => {\n        var allData = {\n          user_id : this.user_id, \n          phone : this.phone\n        }  \n        \n        this.server.chkUser(allData).subscribe((res:any) => {\n          loading.dismiss();\n          if (res.msg == 'phone_exist') {\n            this.presentToast(\"El nÃºmero telefonico que intentas registrar ya se encuentra en uso, por favor intenta con otro.\",\"danger\");\n          }\n          else if(res.msg == \"not_exist\")\n          {\n            this.presentToast(\"Termina tu registro ingresando tus datos de contacto. \",\"warning\");\n            localStorage.setItem(\"number_phone\",JSON.stringify(this.phone));\n            this.nav.navigateRoot('/signup');\n          }\n          else {\n            this.presentToast('Bienvenido(a) de nuevo...','success');\n            localStorage.setItem('user_id',res.user_id);\n            this.events.publish('user_login', res.user_id);\n            this.server.SignPhone({phone : this.phone, user_id: res.user_id}).subscribe((req:any) => {\n              if (req.msg == 'done') {\n                let navigationExtras: NavigationExtras = {\n                  queryParams: {\n                    redirect: 'home'\n                  }\n                };\n                this.nav.navigateForward(['/waitpage'], navigationExtras);\n              }else {\n                this.presentToast(req.msg,'danger');\n              }\n            });\n          }\n        }); \n      });\n    }else {\n      loading.dismiss();\n      this.presentToast('Porfavor Ingresa un Codigo valido!','danger');\n    }\n  }\n\n  async presentToast(txt, color) {\n    const toast = await this.toastController.create({\n      message: txt,\n      duration: 3000,\n      position : 'top',\n      mode:'ios',\n      color:color\n    });\n    toast.present();\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"account-verfycode-verfycode-module-es5.js"}